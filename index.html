<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="/Users/terencemace/projects/bowling-challenge/scorecard.css" >

    <title>Hello, world!</title>

  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark justify-content-center">

        <a class="navbar-brand" href="/">Bowling Scorecard</a>

    </nav>
    <main role="main" class="container">

      <div class="buttons text-center py-2">
        <button class="btn btn-primary" type="submit">0</button>
        <button class="btn btn-primary" type="submit">1</button>
        <button class="btn btn-primary" type="submit">2</button>
        <button class="btn btn-primary" type="submit">3</button>
        <button class="btn btn-primary" type="submit">4</button>
        <button class="btn btn-primary" type="submit">5</button>
        <button class="btn btn-primary" type="submit">6</button>
        <button class="btn btn-primary" type="submit">7</button>
        <button class="btn btn-primary" type="submit">8</button>
        <button class="btn btn-primary" type="submit">9</button>
        <button class="btn btn-primary" type="submit">10</button>

      </div>



      <div class="table-responsive">

        <table class="table table-bordered text-center">
          <thead class="thead-primary">
            <th colspan="2">Frame 1</th>
            <th colspan="2">Frame 2</th>
            <th colspan="2">Frame 3</th>
            <th colspan="2">Frame 4</th>
            <th colspan="2">Frame 5</th>
            <th colspan="2">Frame 6</th>
            <th colspan="2">Frame 7</th>
            <th colspan="2">Frame 8</th>
            <th colspan="2">Frame 9</th>
            <th colspan="3">Frame 10</th>
            <th>Total Score</th>
          </thead>
          <tr>
            <td class="bowl-1" id="bowl-1">&nbsp</td>
            <td id="bowl-2">&nbsp</td>
            <td class="bowl-1" id="bowl-3">&nbsp</td>
            <td id="bowl-4">&nbsp</td>
            <td class="bowl-1" id="bowl-5">&nbsp</td>
            <td id="bowl-6">&nbsp</td>
            <td class="bowl-1" id="bowl-7">&nbsp</td>
            <td id="bowl-8">&nbsp</td>
            <td class="bowl-1" id="bowl-9">&nbsp</td>
            <td id="bowl-10">&nbsp</td>
            <td class="bowl-1" id="bowl-11">&nbsp</td>
            <td id="bowl-12">&nbsp</td>
            <td class="bowl-1" id="bowl-13">&nbsp</td>
            <td id="bowl-14">&nbsp</td>
            <td class="bowl-1" id="bowl-15">&nbsp</td>
            <td id="bowl-16">&nbsp</td>
            <td class="bowl-1" id="bowl-17">&nbsp</td>
            <td id="bowl-18">&nbsp</td>
            <td class="bowl-1" id="bowl-19">&nbsp</td>
            <td id="bowl-20">&nbsp</td>
            <td id="bowl-21">&nbsp</td>
            <td rowspan="2" valign="bottom" id="total-score"></td>
          </tr>
          <tr>
            <td colspan="2" class="frame-score" id="frame-1-score">&nbsp</td>
            <td colspan="2" class="frame-score" id="frame-2-score">&nbsp</td>
            <td colspan="2" class="frame-score" id="frame-3-score">&nbsp</td>
            <td colspan="2" class="frame-score" id="frame-4-score">&nbsp</td>
            <td colspan="2" class="frame-score" id="frame-5-score">&nbsp</td>
            <td colspan="2" class="frame-score" id="frame-6-score">&nbsp</td>
            <td colspan="2" class="frame-score" id="frame-7-score">&nbsp</td>
            <td colspan="2" class="frame-score" id="frame-8-score">&nbsp</td>
            <td colspan="2" class="frame-score" id="frame-9-score">&nbsp</td>
            <td colspan="3" class="frame-score" id="frame-10-score">&nbsp</td>
          </tr>
        </table>
      </div>
    </main>



    <footer class="footer fixed-bottom text-center">
      <div class="container">
        <span class="text-muted">Created by <a href="https://github.com/tolvic">Terry Mace</a></span>
      </div>
    </footer>

    <script src="/Users/terencemace/projects/bowling-challenge/src/game.js"></script>
    <script src="/Users/terencemace/projects/bowling-challenge/src/frame.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

    <script>
      var bowlCounter = 0;
      var game = new Game;
      var bowlOne;
      var bowlTwo;
      var output;

      function setBowl(){
        if (typeof bowlOne === 'undefined') {
          bowlOne = bowl;
          } else {
          bowlTwo = bowl;
      		}
      };

      function incrementBowlCounter(){
        bowlCounter++
        if (bowl === '10') {
          bowlCounter++
        }
      }

      function setOutput(){
        if (bowl === '10') {
          output = 'x'
        } else if (parseInt(bowlOne) + parseInt(bowlTwo) === 10) {
          output = '/'
        } else {
          output = bowl
        }
      }

      function addFrameToGame(){
        if (typeof bowlTwo !== 'undefined'){
          game.addFrame(new Frame([parseInt(bowlOne), parseInt(bowlTwo)]))
          bowlOne = undefined
          bowlTwo = undefined
        }
        if (bowlOne === '10'){
          game.addFrame(new Frame([parseInt(bowlOne)]))
          bowlOne = undefined
        }
      }

      function updateTotalScore(){
        $('#total-score').text(game.gameScore);
      }

      function updateFrameScores(){
        for (var i = 1; i <= game.frames.length; i++) {
          $('#frame-'+ i + '-score').text(game.frames[i-1].frameScore);
        }
      }


      $('button').click(function() {
        bowl = $(this).text();
        setBowl()
        // function needed to disable buttons
        incrementBowlCounter();
        setOutput();
        $('#bowl-' + bowlCounter).text(output);
        addFrameToGame();
        updateTotalScore();
        updateFrameScores();




      });

    </script>
  </body>
</html>
